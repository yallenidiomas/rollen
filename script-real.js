const a0_0x27f276=a0_0x1dc0;(function(_0x3affeb,_0x2a46c5){const _0x28fca1=a0_0x1dc0,_0x10c822=_0x3affeb();while(!![]){try{const _0xb32060=parseInt(_0x28fca1(0x204))/0x1+parseInt(_0x28fca1(0x1c4))/0x2+parseInt(_0x28fca1(0x11f))/0x3*(parseInt(_0x28fca1(0x104))/0x4)+-parseInt(_0x28fca1(0x1f8))/0x5+-parseInt(_0x28fca1(0x151))/0x6*(-parseInt(_0x28fca1(0xe2))/0x7)+parseInt(_0x28fca1(0x141))/0x8*(parseInt(_0x28fca1(0x1bd))/0x9)+-parseInt(_0x28fca1(0x1cc))/0xa;if(_0xb32060===_0x2a46c5)break;else _0x10c822['push'](_0x10c822['shift']());}catch(_0x101f8f){_0x10c822['push'](_0x10c822['shift']());}}}(a0_0x273c,0x247c2));const AudioContext=window[a0_0x27f276(0x212)]||window['webkitAudioContext'],audioCtx=new AudioContext(),soundBuffers={};let currentHoldSource=null;const soundMap={'click':a0_0x27f276(0x1e2),'touch':a0_0x27f276(0x118),'hold':'./hold.mp3','shoot':a0_0x27f276(0xbc),'start':'./start.mp3','crit':'./crit.mp3','fumble':a0_0x27f276(0x185),'col0':a0_0x27f276(0x214),'col1':a0_0x27f276(0x16b),'col2':'./collide3.mp3','col3':'./collide4.mp3','col4':a0_0x27f276(0x19b)};async function preloadSounds(){const _0x390c83=a0_0x27f276;for(const [_0x4b3e00,_0x169bdb]of Object[_0x390c83(0x1e1)](soundMap)){try{const _0x2d8555=await fetch(_0x169bdb),_0x5b076b=await _0x2d8555['arrayBuffer'](),_0x5518c8=await audioCtx[_0x390c83(0x145)](_0x5b076b);soundBuffers[_0x4b3e00]=_0x5518c8;}catch(_0x44e521){console[_0x390c83(0x1ec)](_0x390c83(0x22d)+_0x4b3e00,_0x44e521);}}}preloadSounds();function playSound(_0x302019,_0x598536=null){const _0x18e438=a0_0x27f276;if(audioCtx[_0x18e438(0x139)]===_0x18e438(0x194))audioCtx[_0x18e438(0x1e6)]()['catch'](()=>{});let _0x44b01f=_0x302019;if(_0x302019===_0x18e438(0x11e)&&_0x598536!==null)_0x44b01f='col'+_0x598536;const _0x46df3a=soundBuffers[_0x44b01f];if(!_0x46df3a)return;const _0x546b43=audioCtx[_0x18e438(0x1f5)](),_0x1eef07=audioCtx[_0x18e438(0xec)]();_0x546b43[_0x18e438(0x221)]=_0x46df3a;if(_0x302019===_0x18e438(0x21e))_0x1eef07['gain'][_0x18e438(0x23a)]=0x1;else{if(_0x302019===_0x18e438(0x171))_0x1eef07['gain'][_0x18e438(0x23a)]=0.3;else{if(_0x302019===_0x18e438(0xfa)||_0x302019==='click')_0x1eef07[_0x18e438(0x209)][_0x18e438(0x23a)]=0.4;else{if(_0x302019===_0x18e438(0x11e))_0x1eef07[_0x18e438(0x209)][_0x18e438(0x23a)]=0.8;else _0x1eef07[_0x18e438(0x209)][_0x18e438(0x23a)]=0x1;}}}_0x546b43[_0x18e438(0xc1)]['value']=0.95+Math[_0x18e438(0x15f)]()*0.1,_0x546b43[_0x18e438(0x1f4)](_0x1eef07),_0x1eef07['connect'](audioCtx['destination']);if(_0x302019==='hold'){if(currentHoldSource)try{currentHoldSource[_0x18e438(0x135)]();}catch(_0x42489c){}_0x546b43[_0x18e438(0x206)]=!![],currentHoldSource=_0x546b43;}_0x546b43['start'](0x0);}function stopHoldSound(){const _0x550830=a0_0x27f276;if(currentHoldSource)try{currentHoldSource[_0x550830(0x135)](),currentHoldSource=null;}catch(_0x18a2cb){}}const avatars={'master':a0_0x27f276(0x180),'monster':'<img\x20src=\x22monster.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Monstro\x22>','boss':a0_0x27f276(0x181),'familiar':a0_0x27f276(0x10e),'humanf':a0_0x27f276(0xf4),'humanm':a0_0x27f276(0x103),'bhumanm':'<img\x20src=\x22bhumanm.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Humano\x22>','bhumanf':a0_0x27f276(0xe7),'dragonbornf':a0_0x27f276(0xcd),'dragonbornm':a0_0x27f276(0xd1),'elfdrowf':a0_0x27f276(0x15e),'elfdrowm':a0_0x27f276(0x1ca),'elfhighf':a0_0x27f276(0x21b),'elfhighm':a0_0x27f276(0xc4),'elfwoodf':'<img\x20src=\x22elfwoodf.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Elfo\x20da\x20Floresta\x20F\x22>','elfwoodm':a0_0x27f276(0x201),'gnomef':a0_0x27f276(0xb9),'gnomem':a0_0x27f276(0x124),'tieflingf':a0_0x27f276(0x178),'tieflingm':a0_0x27f276(0xd4),'halfelff':a0_0x27f276(0x142),'halfelfm':a0_0x27f276(0x17b),'halforcf':'<img\x20src=\x22halforcf.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Orc\x20F\x22>','halforcm':a0_0x27f276(0x14d),'aesimarm':'<img\x20src=\x22aesimarm.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Aesimar\x20M\x22>','aesimarf':a0_0x27f276(0x1b8),'goliathm':a0_0x27f276(0x1d4),'goliathf':a0_0x27f276(0x1b5)},diceConfigs={0x4:{'color':0xef5350},0x6:{'color':0xffca28},0x8:{'color':0x66bb6a},0xa:{'color':0x42a5f5},0xc:{'color':0xab47bc},0x14:{'color':0xffffff}},diceTypes=[0x4,0x6,0x8,0xa,0xc,0x14];let campaign={'name':a0_0x27f276(0x1ac),'characters':[],'globalLog':[]},activeCharIndex=0x0,selectedAvatarKey=a0_0x27f276(0x1da),diceObjects=[],magicEffects=[],hasCritHappened=![],currentSpecialSound=null,world,scene,camera,renderer,isRolling=![],pressTimer=null,pressPower=0x0,isPressing=![],sparkleTexture=null,walls={'left':null,'right':null,'top':null,'bottom':null},isGameRunning=![],clock=new THREE[(a0_0x27f276(0x10c))](),rollMode='normal',lastCollisionTime=0x0,matDice,matGround;document[a0_0x27f276(0x17f)](a0_0x27f276(0x1a3),()=>{const _0x49baf1=a0_0x27f276;try{loadData();}catch(_0x5ed57b){console[_0x49baf1(0x223)](_0x49baf1(0x149),_0x5ed57b),localStorage[_0x49baf1(0x1c9)]();}renderDiceButtons(),renderAvatarSelection(),setupEventListeners(),setupColorPicker(),setupModPicker();try{initPhysicsAndGraphics(),animate();}catch(_0x45dc4c){console[_0x49baf1(0x223)](_0x49baf1(0x13a),_0x45dc4c);}});function saveData(){const _0x471df6=a0_0x27f276;try{const _0x25b86e=document[_0x471df6(0x20f)]('modInput');_0x25b86e&&campaign[_0x471df6(0x129)][activeCharIndex]&&(campaign[_0x471df6(0x129)][activeCharIndex]['modifier']=parseInt(_0x25b86e[_0x471df6(0x23a)])||0x0);const _0x3cd4a4={'campaign':campaign,'activeCharIndex':activeCharIndex,'isGameRunning':isGameRunning};localStorage[_0x471df6(0x126)](_0x471df6(0x113),JSON[_0x471df6(0x146)](_0x3cd4a4));}catch(_0x3cb01a){console['error'](_0x471df6(0x230),_0x3cb01a);}}function loadData(){const _0x20d579=a0_0x27f276,_0x10b4b0=localStorage[_0x20d579(0x202)](_0x20d579(0x113));if(_0x10b4b0)try{const _0x3afef2=JSON[_0x20d579(0xe8)](_0x10b4b0);if(_0x3afef2[_0x20d579(0x150)]){campaign=_0x3afef2[_0x20d579(0x150)];if(!Array[_0x20d579(0x170)](campaign['characters']))campaign['characters']=[];if(!Array[_0x20d579(0x170)](campaign[_0x20d579(0xdb)]))campaign[_0x20d579(0xdb)]=[];activeCharIndex=_0x3afef2[_0x20d579(0x1b4)]||0x0,isGameRunning=_0x3afef2['isGameRunning']||![];if(isGameRunning&&campaign[_0x20d579(0x129)][_0x20d579(0x199)]>0x0){document['getElementById'](_0x20d579(0x229))[_0x20d579(0x1b7)][_0x20d579(0x18c)]='none',document[_0x20d579(0x20f)](_0x20d579(0x1f3))[_0x20d579(0x1b7)][_0x20d579(0x18c)]=_0x20d579(0xc3),setTimeout(()=>refreshCanvasSize(),0x32),renderTabs();const _0x8ddc00=activeCharIndex;activeCharIndex=-0x1,setTimeout(()=>switchTab(_0x8ddc00),0x64);}else document['getElementById'](_0x20d579(0x229))[_0x20d579(0x1b7)][_0x20d579(0x18c)]='flex',updateModalCharList();}}catch(_0x596ce7){console['error'](_0x20d579(0x14a),_0x596ce7);}}function updateModalCharList(){const _0x5b5476=a0_0x27f276,_0x5e7980=document['getElementById']('charListPreview');if(!_0x5e7980)return;_0x5e7980[_0x5b5476(0x16a)]='';if(!campaign[_0x5b5476(0x129)])campaign[_0x5b5476(0x129)]=[];campaign[_0x5b5476(0x129)][_0x5b5476(0x1bf)](_0x4f5163=>{const _0xff0c62=_0x5b5476,_0x7151fe=document[_0xff0c62(0x189)]('li');_0x7151fe['innerHTML']='<div\x20class=\x22preview-avatar\x22\x20style=\x22border-color:'+_0x4f5163[_0xff0c62(0x1c6)]+'\x22>'+_0x4f5163[_0xff0c62(0xb8)]+_0xff0c62(0xbb)+_0x4f5163[_0xff0c62(0x1c6)]+_0xff0c62(0x1f9)+_0x4f5163['name']+'</span>',_0x5e7980[_0xff0c62(0xbd)](_0x7151fe);});const _0x30ae51=document[_0x5b5476(0x20f)]('startCampaignBtn');if(_0x30ae51)_0x30ae51[_0x5b5476(0x102)]=campaign[_0x5b5476(0x129)][_0x5b5476(0x199)]===0x0;}function renderDiceButtons(){const _0x17557f=a0_0x27f276,_0x5a18af=document[_0x17557f(0x20f)](_0x17557f(0xf3));if(!_0x5a18af)return;_0x5a18af['innerHTML']='',diceTypes['forEach'](_0x1cb8db=>{const _0x39e494=_0x17557f,_0x3d91fd=document['createElement']('button');_0x3d91fd[_0x39e494(0xf1)]=_0x39e494(0x182),_0x3d91fd['id']=_0x39e494(0x1df)+_0x1cb8db,_0x3d91fd[_0x39e494(0x16a)]='D'+_0x1cb8db+_0x39e494(0x117)+_0x1cb8db+_0x39e494(0x114),_0x3d91fd[_0x39e494(0x14c)]=()=>addDice(_0x1cb8db),_0x5a18af['appendChild'](_0x3d91fd);});}function renderAvatarSelection(){const _0x112877=a0_0x27f276,_0x5f4a38=document[_0x112877(0x20f)](_0x112877(0x174));if(!_0x5f4a38)return;_0x5f4a38[_0x112877(0x16a)]='',Object[_0x112877(0x1a8)](avatars)[_0x112877(0x1bf)](_0x18e537=>{const _0x3b089a=_0x112877,_0x551d55=document[_0x3b089a(0x189)](_0x3b089a(0x228));_0x551d55[_0x3b089a(0xf1)]=_0x3b089a(0x166)+(_0x18e537===selectedAvatarKey?_0x3b089a(0x12a):''),_0x551d55[_0x3b089a(0x16a)]=avatars[_0x18e537],_0x551d55[_0x3b089a(0x14c)]=()=>{const _0x1cd2c1=_0x3b089a;document[_0x1cd2c1(0xb3)]('.avatar-option')[_0x1cd2c1(0x1bf)](_0x11eb34=>_0x11eb34['classList']['remove'](_0x1cd2c1(0x12a))),_0x551d55[_0x1cd2c1(0xd3)][_0x1cd2c1(0x130)]('selected'),selectedAvatarKey=_0x18e537;},_0x5f4a38['appendChild'](_0x551d55);});}function setupColorPicker(){const _0x27af5d=a0_0x27f276,_0x1abc45=document[_0x27af5d(0x20f)]('charColorInput'),_0x3127d0=document[_0x27af5d(0xf6)]('.color-picker-wrapper');if(_0x1abc45&&_0x3127d0){const _0x43f1b7=()=>{const _0x263995=_0x27af5d;_0x3127d0['style']['backgroundColor']=_0x1abc45[_0x263995(0x23a)];};_0x1abc45['addEventListener'](_0x27af5d(0x213),_0x43f1b7),_0x43f1b7();}}function updateDiceButtonUI(_0x3b2d1a,_0xa8473f,_0x4262d8){const _0x2b2013=a0_0x27f276,_0x371811=document[_0x2b2013(0x20f)](_0x2b2013(0xb7)+_0x3b2d1a),_0xbedd40=document['getElementById'](_0x2b2013(0x1df)+_0x3b2d1a);if(!_0x371811||!_0xbedd40)return;if(_0x4262d8){_0x371811[_0x2b2013(0x15b)]='0',_0x371811['style']['display']='none',_0xbedd40[_0x2b2013(0xd3)]['remove'](_0x2b2013(0x12a));return;}let _0x44ae40=parseInt(_0x371811[_0x2b2013(0x15b)])||0x0;_0x44ae40+=_0xa8473f,_0x371811[_0x2b2013(0x15b)]=_0x44ae40,_0x371811[_0x2b2013(0x1b7)]['display']=_0x44ae40>0x0?_0x2b2013(0xc3):_0x2b2013(0x1ce);if(_0x44ae40>0x0)_0xbedd40['classList'][_0x2b2013(0x130)](_0x2b2013(0x12a));}function updateResultDisplay(_0x2fba51,_0x134ed2){const _0x282278=a0_0x27f276,_0x131072=document[_0x282278(0x20f)](_0x282278(0x20c)),_0x5554ff=document[_0x282278(0x20f)](_0x282278(0x203));if(_0x131072)_0x131072[_0x282278(0x16a)]=_0x2fba51;if(_0x5554ff){_0x5554ff[_0x282278(0x15b)]=_0x134ed2;const _0x53458b=campaign[_0x282278(0x129)][activeCharIndex];if(_0x53458b)_0x5554ff[_0x282278(0x1b7)]['color']='#ffffff';}}function openAddCharModal(){const _0x9c1cc=a0_0x27f276,_0x4621f7=document[_0x9c1cc(0x20f)](_0x9c1cc(0x229)),_0x3e0191=document['getElementById'](_0x9c1cc(0xe3));updateModalCharList(),isGameRunning?(_0x3e0191[_0x9c1cc(0x15b)]=_0x9c1cc(0x197),_0x3e0191[_0x9c1cc(0x102)]=![]):(_0x3e0191[_0x9c1cc(0x15b)]=_0x9c1cc(0x23b),_0x3e0191[_0x9c1cc(0x102)]=campaign[_0x9c1cc(0x129)][_0x9c1cc(0x199)]===0x0),_0x4621f7[_0x9c1cc(0x1b7)]['display']=_0x9c1cc(0xc3),playSound('click');}function a0_0x1dc0(_0x569716,_0x90e19a){_0x569716=_0x569716-0xb3;const _0x273c9c=a0_0x273c();let _0x1dc0b2=_0x273c9c[_0x569716];return _0x1dc0b2;}function addCharacterPreview(){const _0x81f46d=a0_0x27f276;try{const _0x4d324a=document['getElementById'](_0x81f46d(0x131)),_0x23f943=document[_0x81f46d(0x20f)]('charColorInput');if(!_0x4d324a||!_0x23f943)return;const _0x4f15c2=_0x4d324a[_0x81f46d(0x23a)]['trim'](),_0x3ab869=_0x23f943[_0x81f46d(0x23a)];if(!_0x4f15c2)return;const _0xf14cc8={'name':_0x4f15c2,'color':_0x3ab869,'avatar':avatars[selectedAvatarKey]||avatars[_0x81f46d(0x1da)],'turnCount':0x1,'history':[],'modifier':0x0,'rollMode':_0x81f46d(0x116)};if(!campaign['characters'])campaign[_0x81f46d(0x129)]=[];campaign['characters'][_0x81f46d(0x108)](_0xf14cc8),saveData(),updateModalCharList(),_0x4d324a['value']='',selectedAvatarKey=_0x81f46d(0x1da),renderAvatarSelection(),playSound(_0x81f46d(0x1d8));}catch(_0x4b1948){console[_0x81f46d(0x223)](_0x81f46d(0x1a1),_0x4b1948),alert(_0x81f46d(0xc7));}}function startCampaign(){const _0x543678=a0_0x27f276;campaign[_0x543678(0xd0)]=document[_0x543678(0x20f)](_0x543678(0x19f))[_0x543678(0x23a)]||_0x543678(0x1ac),isGameRunning=!![],saveData(),document[_0x543678(0x20f)](_0x543678(0x229))[_0x543678(0x1b7)]['display']='none',document[_0x543678(0x20f)]('appContainer')[_0x543678(0x1b7)][_0x543678(0x18c)]='flex',setTimeout(()=>refreshCanvasSize(),0x32),renderTabs(),activeCharIndex=-0x1,setTimeout(()=>{const _0x2d5cf6=_0x543678;if(campaign[_0x2d5cf6(0x129)][_0x2d5cf6(0x199)]>0x0)switchTab(0x0);},0x64);}function renderTabs(){const _0x117565=a0_0x27f276,_0x107a07=document[_0x117565(0x20f)](_0x117565(0x11b));if(!_0x107a07)return;_0x107a07['innerHTML']='';if(!campaign[_0x117565(0x129)])campaign['characters']=[];campaign[_0x117565(0x129)][_0x117565(0x1bf)]((_0x2c2063,_0x3c5c8a)=>{const _0x5ecb90=_0x117565,_0xebe6e0=document['createElement'](_0x5ecb90(0x228));_0xebe6e0[_0x5ecb90(0xf1)]=_0x5ecb90(0x19e)+(_0x3c5c8a===activeCharIndex?'active':''),_0xebe6e0[_0x5ecb90(0x16a)]=_0x5ecb90(0x222)+_0x2c2063[_0x5ecb90(0xb8)]+_0x5ecb90(0x1dc)+_0x2c2063['name'],_0xebe6e0[_0x5ecb90(0x1b7)][_0x5ecb90(0x1aa)]=_0x2c2063['color'];if(_0x3c5c8a===activeCharIndex){_0xebe6e0[_0x5ecb90(0x1b7)][_0x5ecb90(0x1c6)]=_0x2c2063['color'];const _0x1e0d90=_0xebe6e0[_0x5ecb90(0xf6)](_0x5ecb90(0x100));if(_0x1e0d90)_0x1e0d90[_0x5ecb90(0x1b7)]['fill']=_0x2c2063[_0x5ecb90(0x1c6)];}_0xebe6e0[_0x5ecb90(0x14c)]=()=>switchTab(_0x3c5c8a),_0xebe6e0[_0x5ecb90(0x140)]=!![],_0xebe6e0[_0x5ecb90(0x1e8)]=_0x4394ef=>{const _0x49e417=_0x5ecb90;_0x4394ef[_0x49e417(0x225)][_0x49e417(0x134)](_0x49e417(0x231),_0x3c5c8a),_0xebe6e0['style'][_0x49e417(0x107)]='0.5';},_0xebe6e0[_0x5ecb90(0x122)]=()=>{const _0x47f3c6=_0x5ecb90;_0xebe6e0[_0x47f3c6(0x1b7)][_0x47f3c6(0x107)]='1';},_0xebe6e0[_0x5ecb90(0x165)]=_0x135653=>{const _0x276508=_0x5ecb90;_0x135653[_0x276508(0x1f7)]();},_0xebe6e0[_0x5ecb90(0x175)]=_0x2c9f96=>{const _0x32fc1b=_0x5ecb90;_0x2c9f96['preventDefault']();const _0x1f01d1=parseInt(_0x2c9f96[_0x32fc1b(0x225)]['getData'](_0x32fc1b(0x231))),_0x4b076c=_0x3c5c8a;if(_0x1f01d1!==_0x4b076c){const _0x1aa8e9=campaign[_0x32fc1b(0x129)][_0x32fc1b(0xf8)](_0x1f01d1,0x1)[0x0];campaign[_0x32fc1b(0x129)][_0x32fc1b(0xf8)](_0x4b076c,0x0,_0x1aa8e9);if(activeCharIndex===_0x1f01d1)activeCharIndex=_0x4b076c;else{if(activeCharIndex>_0x1f01d1&&activeCharIndex<=_0x4b076c)activeCharIndex--;else{if(activeCharIndex<_0x1f01d1&&activeCharIndex>=_0x4b076c)activeCharIndex++;}}saveData(),renderTabs();}},_0x107a07[_0x5ecb90(0xbd)](_0xebe6e0);});const _0x4c08e3=document[_0x117565(0x189)]('button');_0x4c08e3[_0x117565(0xf1)]='add-char-tab',_0x4c08e3['innerText']='+',_0x4c08e3['onclick']=openAddCharModal,_0x107a07[_0x117565(0xbd)](_0x4c08e3);}function switchTab(_0x2be370){const _0x5ad2cf=a0_0x27f276;if(_0x2be370<0x0||_0x2be370>=campaign[_0x5ad2cf(0x129)][_0x5ad2cf(0x199)])return;activeCharIndex=_0x2be370;const _0x5b81f4=campaign['characters'][activeCharIndex];clearDice();const _0x11a4f3=document['getElementById'](_0x5ad2cf(0xb5)),_0x13ab2b=document[_0x5ad2cf(0x20f)](_0x5ad2cf(0x1cd));if(_0x11a4f3)_0x11a4f3[_0x5ad2cf(0x23a)]=_0x5b81f4[_0x5ad2cf(0x136)]||0x0;if(_0x13ab2b)_0x13ab2b[_0x5ad2cf(0x15b)]=(_0x5b81f4['modifier']>0x0?'+':'')+(_0x5b81f4[_0x5ad2cf(0x136)]||0x0);setRollMode(_0x5b81f4[_0x5ad2cf(0x184)]||_0x5ad2cf(0x116));const _0xba7560=document[_0x5ad2cf(0x20f)](_0x5ad2cf(0x1ed));if(_0xba7560&&_0x5b81f4){_0xba7560[_0x5ad2cf(0x16a)]=_0x5b81f4[_0x5ad2cf(0xb8)],_0xba7560[_0x5ad2cf(0x1b7)]['borderColor']=_0x5b81f4['color'];const _0x269c2c=_0xba7560[_0x5ad2cf(0xf6)]('svg');if(_0x269c2c)_0x269c2c[_0x5ad2cf(0x1b7)][_0x5ad2cf(0xef)]=_0x5b81f4[_0x5ad2cf(0x1c6)];}const _0x3623cd=document[_0x5ad2cf(0x20f)](_0x5ad2cf(0x203));if(_0x3623cd)_0x3623cd[_0x5ad2cf(0x1b7)][_0x5ad2cf(0x1c6)]=_0x5b81f4[_0x5ad2cf(0x1c6)];renderTabs(),updateHistoryUI(),saveData();}function toggleSettings(){const _0x1839a4=a0_0x27f276,_0x261f68=document[_0x1839a4(0x20f)](_0x1839a4(0x1eb));_0x261f68['style'][_0x1839a4(0x18c)]=_0x261f68[_0x1839a4(0x1b7)]['display']===_0x1839a4(0x1ce)?'flex':_0x1839a4(0x1ce),playSound(_0x1839a4(0x1d8));}function resetJourney(){const _0x52101c=a0_0x27f276;confirm(_0x52101c(0x1e3))&&(localStorage['clear'](),campaign={'name':_0x52101c(0x1ac),'characters':[],'globalLog':[]},isGameRunning=![],location['reload']());}function resetCampaignHistory(){const _0x41459f=a0_0x27f276;confirm(_0x41459f(0x1f0))&&(campaign[_0x41459f(0x129)][_0x41459f(0x1bf)](_0x156973=>{const _0x3db9ce=_0x41459f;_0x156973[_0x3db9ce(0xc9)]=[],_0x156973[_0x3db9ce(0x1e7)]=0x1;}),campaign['globalLog']=[],updateHistoryUI(),toggleSettings(),saveData(),alert(_0x41459f(0x192))),playSound('click');}function initPhysicsAndGraphics(){const _0x259b15=a0_0x27f276,_0x133c42=document['getElementById'](_0x259b15(0x22f));if(!_0x133c42)return;scene=new THREE[(_0x259b15(0xf7))]();const _0x49fc58=new THREE[(_0x259b15(0x1b3))](0xffffff,0.5);scene[_0x259b15(0x130)](_0x49fc58);const _0x990cb5=new THREE[(_0x259b15(0xff))](0xffffff,0.8);_0x990cb5[_0x259b15(0x1fe)][_0x259b15(0x1de)](0x5,0x14,0x5),_0x990cb5['castShadow']=!![],scene[_0x259b15(0x130)](_0x990cb5);const _0x11cad6=new THREE[(_0x259b15(0x1d5))](0xaaccff,0.3);_0x11cad6[_0x259b15(0x1fe)][_0x259b15(0x1de)](-0xa,0x5,-0xa),scene[_0x259b15(0x130)](_0x11cad6),camera=new THREE[(_0x259b15(0x1cf))](0x2d,0x1,0.1,0x64),camera[_0x259b15(0x1fe)][_0x259b15(0x1de)](0x0,0x12,0x0),camera[_0x259b15(0xba)](0x0,0x0,0x0),renderer=new THREE[(_0x259b15(0x1d9))]({'alpha':!![],'antialias':!![]}),renderer[_0x259b15(0x18e)][_0x259b15(0x101)]=!![],renderer[_0x259b15(0x18e)][_0x259b15(0x115)]=THREE[_0x259b15(0x128)],_0x133c42[_0x259b15(0xbd)](renderer[_0x259b15(0x18d)]),sparkleTexture=createSparkleTexture(),world=new CANNON['World'](),world[_0x259b15(0x137)][_0x259b15(0x1de)](0x0,-0x28,0x0),world[_0x259b15(0x157)]=new CANNON[(_0x259b15(0xc5))](),world[_0x259b15(0xdd)][_0x259b15(0x1d1)]=0xa,matGround=new CANNON[(_0x259b15(0x1fa))](),matDice=new CANNON[(_0x259b15(0x1fa))](),world[_0x259b15(0x1b9)](new CANNON['ContactMaterial'](matGround,matDice,{'friction':0.2,'restitution':0.7})),world[_0x259b15(0x1b9)](new CANNON[(_0x259b15(0x15d))](matDice,matDice,{'friction':0.1,'restitution':0.7}));const _0x1737fe=new CANNON[(_0x259b15(0x18b))]({'mass':0x0,'shape':new CANNON['Plane'](),'material':matGround});_0x1737fe[_0x259b15(0x227)][_0x259b15(0x147)](new CANNON[(_0x259b15(0xd9))](0x1,0x0,0x0),-Math['PI']/0x2),world[_0x259b15(0xea)](_0x1737fe),walls[_0x259b15(0x164)]=createWallBody(),walls[_0x259b15(0x1c5)]=createWallBody(),walls['top']=createWallBody(),walls[_0x259b15(0x1ad)]=createWallBody();}function createWallBody(){const _0x5221df=a0_0x27f276,_0x313001=new CANNON[(_0x5221df(0x18b))]({'mass':0x0,'shape':new CANNON[(_0x5221df(0x14b))](new CANNON[(_0x5221df(0xd9))](0x1,0xa,0x14))});return world[_0x5221df(0xea)](_0x313001),_0x313001;}function updateWallPositions(){const _0x51a7da=a0_0x27f276;if(!camera||!renderer)return;const _0x5a0659=camera[_0x51a7da(0x1fe)]['y'],_0x16789d=THREE['Math'][_0x51a7da(0x138)](camera[_0x51a7da(0xcb)]),_0x10adf6=0x2*Math[_0x51a7da(0x237)](_0x16789d/0x2)*_0x5a0659,_0x23516d=_0x10adf6*camera['aspect'],_0x1799ae=0.9,_0x5d6f84=_0x23516d/0x2*_0x1799ae,_0x56bece=_0x10adf6/0x2*_0x1799ae;walls[_0x51a7da(0x164)]['position'][_0x51a7da(0x1de)](-_0x5d6f84-0x1,0x0,0x0),walls[_0x51a7da(0x164)][_0x51a7da(0x1ab)][0x0]=new CANNON[(_0x51a7da(0x14b))](new CANNON[(_0x51a7da(0xd9))](0x1,0xa,_0x56bece*0x2)),walls[_0x51a7da(0x1c5)][_0x51a7da(0x1fe)][_0x51a7da(0x1de)](_0x5d6f84+0x1,0x0,0x0),walls[_0x51a7da(0x1c5)][_0x51a7da(0x1ab)][0x0]=new CANNON[(_0x51a7da(0x14b))](new CANNON['Vec3'](0x1,0xa,_0x56bece*0x2)),walls[_0x51a7da(0x1fc)][_0x51a7da(0x1fe)]['set'](0x0,0x0,-_0x56bece-0x1),walls[_0x51a7da(0x1fc)]['shapes'][0x0]=new CANNON[(_0x51a7da(0x14b))](new CANNON['Vec3'](_0x5d6f84*0x2,0xa,0x1)),walls['bottom'][_0x51a7da(0x1fe)]['set'](0x0,0x0,_0x56bece+0x1),walls[_0x51a7da(0x1ad)]['shapes'][0x0]=new CANNON[(_0x51a7da(0x14b))](new CANNON['Vec3'](_0x5d6f84*0x2,0xa,0x1));}function refreshCanvasSize(){const _0x27dcc4=a0_0x27f276,_0x68ee09=document[_0x27dcc4(0x20f)](_0x27dcc4(0x22f));if(_0x68ee09&&camera&&renderer){const _0x49c08c=_0x68ee09[_0x27dcc4(0x10f)],_0x341d2d=_0x68ee09[_0x27dcc4(0x1a6)];renderer[_0x27dcc4(0x234)](_0x49c08c,_0x341d2d),renderer['setPixelRatio'](Math[_0x27dcc4(0x1d7)](window[_0x27dcc4(0x1c2)],1.5)),camera['aspect']=_0x49c08c/_0x341d2d,camera[_0x27dcc4(0x121)]();if(typeof updateWallPositions===_0x27dcc4(0xd6))updateWallPositions();}}function createDiceGeometry(_0x3d7762,_0x1928a4){const _0x48cad2=a0_0x27f276,_0x4c0931=_0x1928a4;let _0x420954,_0xd73e93,_0x49c01a=0.5;switch(_0x3d7762){case 0x4:_0x420954=new THREE[(_0x48cad2(0xd5))](_0x4c0931),_0xd73e93=new CANNON[(_0x48cad2(0x14b))](new CANNON[(_0x48cad2(0xd9))](_0x4c0931*0.5,_0x4c0931*0.5,_0x4c0931*0.5));break;case 0x6:_0x420954=new THREE['BoxGeometry'](_0x4c0931,_0x4c0931,_0x4c0931),_0xd73e93=new CANNON[(_0x48cad2(0x14b))](new CANNON[(_0x48cad2(0xd9))](_0x4c0931/0x2,_0x4c0931/0x2,_0x4c0931/0x2));break;case 0x8:_0x420954=new THREE[(_0x48cad2(0x16e))](_0x4c0931),_0xd73e93=new CANNON[(_0x48cad2(0x14b))](new CANNON[(_0x48cad2(0xd9))](_0x4c0931*0.5,_0x4c0931*0.5,_0x4c0931*0.5));break;case 0xa:_0x420954=new THREE['DodecahedronGeometry'](_0x4c0931),_0x420954[_0x48cad2(0x13c)](0.8,1.2,0.8),_0xd73e93=new CANNON[(_0x48cad2(0x14b))](new CANNON[(_0x48cad2(0xd9))](_0x4c0931*0.4,_0x4c0931*0.6,_0x4c0931*0.4));break;case 0xc:_0x420954=new THREE['DodecahedronGeometry'](_0x4c0931),_0xd73e93=new CANNON[(_0x48cad2(0x120))](_0x4c0931*0.9),_0x49c01a=0.8;break;case 0x14:_0x420954=new THREE[(_0x48cad2(0x21c))](_0x4c0931),_0xd73e93=new CANNON[(_0x48cad2(0x120))](_0x4c0931*0.9),_0x49c01a=0.8;break;default:_0x420954=new THREE['BoxGeometry'](_0x4c0931,_0x4c0931,_0x4c0931),_0xd73e93=new CANNON[(_0x48cad2(0x14b))](new CANNON[(_0x48cad2(0xd9))](_0x4c0931/0x2,_0x4c0931/0x2,_0x4c0931/0x2));}return{'geometry':_0x420954,'shape':_0xd73e93,'angularDamping':_0x49c01a};}function addDice(_0x597bcb){const _0x938339=a0_0x27f276;if(!scene)return;const _0x442785=campaign[_0x938339(0x129)][activeCharIndex],_0x14e7f8=_0x442785?_0x442785['color']:diceConfigs[_0x597bcb]['color'];try{const {geometry:_0x3d17f5,shape:_0x3674ce,angularDamping:_0x480fd1}=createDiceGeometry(_0x597bcb,0x1),_0x36e433=new THREE[(_0x938339(0x1e4))]({'color':_0x14e7f8,'metalness':0.2,'roughness':0.1,'clearcoat':0x1,'flatShading':!![]}),_0x16eabe=new THREE[(_0x938339(0x17d))](_0x3d17f5,_0x36e433);_0x16eabe[_0x938339(0xc8)]=!![],scene['add'](_0x16eabe);const _0x122abe=new CANNON[(_0x938339(0x18b))]({'mass':0x5,'shape':_0x3674ce,'linearDamping':0.5,'angularDamping':_0x480fd1,'material':matDice});_0x122abe[_0x938339(0x1fe)][_0x938339(0x1de)]((Math[_0x938339(0x15f)]()-0.5)*0x2,0x8,(Math[_0x938339(0x15f)]()-0.5)*0x2),_0x122abe[_0x938339(0x227)][_0x938339(0x1de)](Math[_0x938339(0x15f)](),Math[_0x938339(0x15f)](),Math[_0x938339(0x15f)](),Math[_0x938339(0x15f)]()),_0x122abe['addEventListener']('collide',handleDiceCollision),world['addBody'](_0x122abe),diceObjects['push']({'mesh':_0x16eabe,'body':_0x122abe,'type':_0x597bcb,'stopped':![]}),updateDiceButtonUI(_0x597bcb,0x1),clearMagicEffects();}catch(_0x4ce6ad){console['error']('Erro\x20ao\x20gerar\x20dado:',_0x4ce6ad);}}function createSparkleTexture(){const _0x38f4e7=a0_0x27f276,_0x187cc7=document[_0x38f4e7(0x189)](_0x38f4e7(0x217));_0x187cc7[_0x38f4e7(0xd7)]=0x20,_0x187cc7[_0x38f4e7(0x125)]=0x20;const _0x270653=_0x187cc7[_0x38f4e7(0x20a)]('2d'),_0x37e1c0=_0x270653[_0x38f4e7(0x207)](0x10,0x10,0x0,0x10,0x10,0x10);return _0x37e1c0['addColorStop'](0x0,_0x38f4e7(0x17a)),_0x37e1c0[_0x38f4e7(0x1c7)](0x1,_0x38f4e7(0x144)),_0x270653['fillStyle']=_0x37e1c0,_0x270653[_0x38f4e7(0x148)](0x0,0x0,0x20,0x20),new THREE[(_0x38f4e7(0x190))](_0x187cc7);}function createNumberLabel(_0x1f3a24,_0x412e21){const _0x1f57ea=a0_0x27f276,_0xe12dec=document[_0x1f57ea(0x189)](_0x1f57ea(0x217)),_0x108313=0x100;_0xe12dec[_0x1f57ea(0xd7)]=_0x108313,_0xe12dec[_0x1f57ea(0x125)]=_0x108313;const _0x32d0fb=_0xe12dec[_0x1f57ea(0x20a)]('2d'),_0x72164d=parseInt(_0x412e21[_0x1f57ea(0x143)](0x1,0x3),0x10),_0x2618ed=parseInt(_0x412e21[_0x1f57ea(0x143)](0x3,0x5),0x10),_0x2242b2=parseInt(_0x412e21['slice'](0x5,0x7),0x10),_0x47a6a1=_0x32d0fb[_0x1f57ea(0x207)](_0x108313/0x2,_0x108313/0x2,0x14,_0x108313/0x2,_0x108313/0x2,0x6e);_0x47a6a1[_0x1f57ea(0x1c7)](0x0,_0x1f57ea(0x205)+_0x72164d+','+_0x2618ed+','+_0x2242b2+_0x1f57ea(0xf9)),_0x47a6a1['addColorStop'](0x1,_0x1f57ea(0x205)+_0x72164d+','+_0x2618ed+','+_0x2242b2+',0)'),_0x32d0fb[_0x1f57ea(0x156)]=_0x47a6a1,_0x32d0fb[_0x1f57ea(0x148)](0x0,0x0,_0x108313,_0x108313),_0x32d0fb[_0x1f57ea(0xb6)]=_0x1f57ea(0x161),_0x32d0fb[_0x1f57ea(0xc0)]=_0x1f57ea(0x23c),_0x32d0fb[_0x1f57ea(0x179)]=_0x1f57ea(0x154),_0x32d0fb[_0x1f57ea(0xe9)]=_0x1f57ea(0x238),_0x32d0fb[_0x1f57ea(0x13b)]=0xa,_0x32d0fb[_0x1f57ea(0x156)]=_0x1f57ea(0xcf),_0x32d0fb['fillText'](_0x1f3a24,_0x108313/0x2,_0x108313/0x2);const _0x401c0c=new THREE['SpriteMaterial']({'map':new THREE[(_0x1f57ea(0x190))](_0xe12dec),'transparent':!![],'depthTest':![]}),_0x2b8406=new THREE['Sprite'](_0x401c0c);return _0x2b8406[_0x1f57ea(0x13c)][_0x1f57ea(0x1de)](0.1,0.1,0x1),_0x2b8406[_0x1f57ea(0x210)]=0x3e7,_0x2b8406;}function showFloatingResult(_0xc59458,_0x13d656){const _0x1ee2b7=a0_0x27f276,_0x383684=campaign[_0x1ee2b7(0x129)][activeCharIndex],_0x39c4b2=_0x383684?_0x383684[_0x1ee2b7(0x1c6)]:'#ffffff',_0x5d1564=createNumberLabel(_0x13d656[_0x1ee2b7(0x1ef)](),_0x39c4b2);_0x5d1564['position'][_0x1ee2b7(0x1c8)](_0xc59458[_0x1ee2b7(0x10a)]['position']),_0x5d1564[_0x1ee2b7(0x1fe)]['y']+=0.8,scene[_0x1ee2b7(0x130)](_0x5d1564),magicEffects[_0x1ee2b7(0x108)]({'mainSprite':_0x5d1564,'life':0x0,'maxLife':0x64,'color':_0x39c4b2,'particles':[]});if(_0xc59458[_0x1ee2b7(0x115)]===0x14){if(_0x13d656===0x14)hasCritHappened=!![],playSound(_0x1ee2b7(0x1be)),document[_0x1ee2b7(0x112)][_0x1ee2b7(0xd3)][_0x1ee2b7(0x215)](_0x1ee2b7(0x1f1)),document[_0x1ee2b7(0x112)][_0x1ee2b7(0xd3)][_0x1ee2b7(0x130)]('crit-success-flash',_0x1ee2b7(0x1f6)),setTimeout(()=>{const _0x1d8fe9=_0x1ee2b7;document[_0x1d8fe9(0x112)][_0x1d8fe9(0xd3)][_0x1d8fe9(0x215)](_0x1d8fe9(0x23d),_0x1d8fe9(0x1f6));},0xfa0);else _0x13d656===0x1&&!hasCritHappened&&(playSound(_0x1ee2b7(0x17e)),document[_0x1ee2b7(0x112)][_0x1ee2b7(0xd3)][_0x1ee2b7(0x130)]('nat1-effect',_0x1ee2b7(0x1f6)),setTimeout(()=>{const _0x2ad783=_0x1ee2b7;if(!hasCritHappened)document[_0x2ad783(0x112)]['classList'][_0x2ad783(0x215)]('nat1-effect',_0x2ad783(0x1f6));},0xfa0));}}function clearMagicEffects(){magicEffects['forEach'](_0x5e9385=>{const _0x468be8=a0_0x1dc0;scene[_0x468be8(0x215)](_0x5e9385[_0x468be8(0x12f)]),_0x5e9385['particles'][_0x468be8(0x1bf)](_0x454aca=>scene[_0x468be8(0x215)](_0x454aca[_0x468be8(0x10a)]));}),magicEffects=[];}let chargeAnimId=null,lastFrameTime=0x0;function startCharging(){const _0x317464=a0_0x27f276;if(diceObjects[_0x317464(0x199)]===0x0||isRolling)return;isPressing=!![],clearMagicEffects(),pressPower=0.3,playSound(_0x317464(0x1e9));const _0x163ff5=document[_0x317464(0x20f)](_0x317464(0x1a0)),_0x42b7d4=document[_0x317464(0x20f)]('rollBtn');if(chargeAnimId)cancelAnimationFrame(chargeAnimId);const _0x3adc2b=0x3e8,_0x5d482b=1.5,_0x57f6e1=_0x5d482b-0.3;lastFrameTime=performance[_0x317464(0xda)]();const _0x5ed770=_0x4185e0=>{const _0x3e1120=_0x317464;if(!isPressing)return;const _0x599d10=_0x4185e0-lastFrameTime;lastFrameTime=_0x4185e0,pressPower+=_0x57f6e1/_0x3adc2b*_0x599d10;if(pressPower>=_0x5d482b)pressPower=_0x5d482b;const _0x4ef878=Math['min'](pressPower/_0x5d482b*0x64,0x64);_0x163ff5[_0x3e1120(0x1b7)][_0x3e1120(0xd7)]=_0x4ef878+'%';if(_0x4ef878>=0x64)_0x42b7d4['classList'][_0x3e1120(0x130)](_0x3e1120(0x196));if(pressPower<_0x5d482b)chargeAnimId=requestAnimationFrame(_0x5ed770);};chargeAnimId=requestAnimationFrame(_0x5ed770);}function releaseRoll(){const _0x2ba9c2=a0_0x27f276;if(!isPressing)return;isPressing=![],chargeAnimId&&(cancelAnimationFrame(chargeAnimId),chargeAnimId=null),stopHoldSound(),document['getElementById'](_0x2ba9c2(0x1a0))[_0x2ba9c2(0x1b7)][_0x2ba9c2(0xd7)]='0%',document[_0x2ba9c2(0x20f)](_0x2ba9c2(0x177))[_0x2ba9c2(0xd3)]['remove'](_0x2ba9c2(0x196)),diceObjects['length']>0x0&&!isRolling&&(playSound('shoot'),rollAllDice(pressPower)),pressPower=0x0;}function rollAllDice(_0x4f1049){const _0x3ae29e=a0_0x27f276;isRolling=!![],hasCritHappened=![],clearMagicEffects();const _0xc8c36f=_0x4f1049*0x19;updateResultDisplay(_0x3ae29e(0x236),'?'),diceObjects[_0x3ae29e(0x1bf)](_0x1ad716=>{const _0x4eb4aa=_0x3ae29e;_0x1ad716[_0x4eb4aa(0xfe)]=![],_0x1ad716[_0x4eb4aa(0x112)][_0x4eb4aa(0x167)](),_0x1ad716[_0x4eb4aa(0x112)][_0x4eb4aa(0x1d3)][_0x4eb4aa(0x1de)]((Math[_0x4eb4aa(0x15f)]()-0.5)*_0xc8c36f,_0xc8c36f*0.6+0x5,(Math[_0x4eb4aa(0x15f)]()-0.5)*_0xc8c36f),_0x1ad716['body'][_0x4eb4aa(0xd8)][_0x4eb4aa(0x1de)]((Math[_0x4eb4aa(0x15f)]()-0.5)*0x3c,(Math[_0x4eb4aa(0x15f)]()-0.5)*0x3c,(Math['random']()-0.5)*0x3c);}),checkDiceStopped();}function checkDiceStopped(){const _0x517323=a0_0x27f276;if(!isRolling)return;let _0xd9e45=!![];diceObjects[_0x517323(0x1bf)](_0x56d39b=>{const _0xf41e2c=_0x517323;if(_0x56d39b[_0xf41e2c(0x112)][_0xf41e2c(0x1d3)][_0xf41e2c(0xbf)]()>0.1||_0x56d39b[_0xf41e2c(0x112)][_0xf41e2c(0xd8)][_0xf41e2c(0xbf)]()>0.1)_0xd9e45=![];});if(_0xd9e45)setTimeout(calculateResults,0xc8);else requestAnimationFrame(checkDiceStopped);}function calculateResults(){const _0x3db8f2=a0_0x27f276;let _0xc597b=0x0,_0x48c0c2=[],_0x108d27=[],_0x1d4558=![],_0x302884=![];const _0x427b97=document[_0x3db8f2(0x20f)](_0x3db8f2(0xb5));let _0xdf6544=parseInt(_0x427b97[_0x3db8f2(0x23a)])||0x0;const _0x314878=diceObjects[_0x3db8f2(0x14e)](_0x1affdf=>{const _0x390280=_0x3db8f2,_0x175c88=Math[_0x390280(0x188)](Math[_0x390280(0x15f)]()*_0x1affdf[_0x390280(0x115)])+0x1,_0x59c98d={'val':_0x175c88,'type':_0x1affdf[_0x390280(0x115)],'obj':_0x1affdf,'ignored':![]};if(_0x1affdf[_0x390280(0x115)]===0x14)_0x108d27['push'](_0x59c98d);return _0x59c98d;});if(rollMode!==_0x3db8f2(0x116)&&_0x108d27[_0x3db8f2(0x199)]>=0x2){if(rollMode===_0x3db8f2(0x19a))_0x108d27['sort']((_0x6b0415,_0xcdbba8)=>_0xcdbba8['val']-_0x6b0415[_0x3db8f2(0xdf)]);else _0x108d27[_0x3db8f2(0x155)]((_0x47b3b0,_0xd749de)=>_0x47b3b0['val']-_0xd749de[_0x3db8f2(0xdf)]);for(let _0x375b9f=0x1;_0x375b9f<_0x108d27['length'];_0x375b9f++)_0x108d27[_0x375b9f][_0x3db8f2(0x211)]=!![];}_0x314878[_0x3db8f2(0x1bf)](_0x666fdc=>{const _0x4e794c=_0x3db8f2;if(!_0x666fdc[_0x4e794c(0x211)]){_0xc597b+=_0x666fdc[_0x4e794c(0xdf)];if(_0x666fdc['type']===0x14){if(_0x666fdc['val']===0x14)_0x1d4558=!![];if(_0x666fdc[_0x4e794c(0xdf)]===0x1)_0x302884=!![];}_0x48c0c2[_0x4e794c(0x108)](_0x666fdc[_0x4e794c(0xdf)]+_0x4e794c(0x1ff)+_0x666fdc[_0x4e794c(0x115)]+')'),_0x666fdc[_0x4e794c(0x200)][_0x4e794c(0x10a)][_0x4e794c(0x1ee)][_0x4e794c(0x107)]=0x1,_0x666fdc[_0x4e794c(0x200)][_0x4e794c(0x10a)]['material']['emissiveIntensity']=0x0;}else _0x666fdc['obj'][_0x4e794c(0x10a)][_0x4e794c(0x1ee)][_0x4e794c(0x107)]=0.2,_0x666fdc['obj'][_0x4e794c(0x10a)][_0x4e794c(0x1ee)][_0x4e794c(0x1c6)]['setHex'](0x333333),_0x48c0c2['push']('<span\x20style=\x22text-decoration:\x20line-through;\x20opacity:\x200.5;\x22>'+_0x666fdc[_0x4e794c(0xdf)]+_0x4e794c(0x1fd));showFloatingResult(_0x666fdc[_0x4e794c(0x200)],_0x666fdc['val']);}),_0xc597b+=_0xdf6544;let _0xa97185=_0x48c0c2[_0x3db8f2(0x152)](_0x3db8f2(0x193));if(_0xdf6544!==0x0)_0xa97185+='\x20'+(_0xdf6544>0x0?'+':'')+_0xdf6544+_0x3db8f2(0xdc);isRolling=![],updateResultDisplay(_0xa97185,_0xc597b);if(_0x1d4558)triggerCritEffect(_0x3db8f2(0x18a));else{if(_0x302884)triggerCritEffect(_0x3db8f2(0x1b0));}const _0x206383=campaign[_0x3db8f2(0x129)][activeCharIndex];if(_0x206383){const _0x412e50=_0xa97185['replace'](/<[^>]*>?/gm,'');saveHistory(_0x206383,_0xc597b,_0x412e50);if(!campaign[_0x3db8f2(0xdb)])campaign[_0x3db8f2(0xdb)]=[];const _0x56fdc4=_0x314878[_0x3db8f2(0x12c)](_0x3c94cc=>_0x3c94cc[_0x3db8f2(0x115)]===0x14&&!_0x3c94cc['ignored']);campaign[_0x3db8f2(0xdb)][_0x3db8f2(0x108)]({'charName':_0x206383[_0x3db8f2(0xd0)],'charColor':_0x206383[_0x3db8f2(0x1c6)],'formula':_0x412e50,'total':_0xc597b,'rawD20':_0x56fdc4?_0x56fdc4[_0x3db8f2(0xdf)]:null,'timestamp':new Date()['toLocaleTimeString']([],{'hour':'2-digit','minute':'2-digit'})});}saveData();}function triggerCritEffect(_0xee086a){const _0x598d34=a0_0x27f276,_0xb80225=document[_0x598d34(0x112)];_0xee086a==='success'?(_0xb80225[_0x598d34(0xd3)][_0x598d34(0x130)](_0x598d34(0x23d)),setTimeout(()=>_0xb80225[_0x598d34(0xd3)][_0x598d34(0x215)](_0x598d34(0x23d)),0x3e8)):(_0xb80225[_0x598d34(0xd3)][_0x598d34(0x130)](_0x598d34(0x216),_0x598d34(0x1f6)),setTimeout(()=>_0xb80225[_0x598d34(0xd3)][_0x598d34(0x215)](_0x598d34(0x216),'shake-effect'),0x1f4));}function clearDice(){const _0x221057=a0_0x27f276;diceObjects[_0x221057(0x1bf)](_0x2eae8a=>{const _0x1e6986=_0x221057;if(_0x2eae8a['mesh'])scene[_0x1e6986(0x215)](_0x2eae8a[_0x1e6986(0x10a)]);if(_0x2eae8a['body'])world[_0x1e6986(0xf5)](_0x2eae8a[_0x1e6986(0x112)]);}),diceObjects=[],clearMagicEffects(),diceTypes[_0x221057(0x1bf)](_0x379d00=>updateDiceButtonUI(_0x379d00,0x0,!![])),updateResultDisplay('Adicione\x20dados...','0'),isRolling=![],playSound(_0x221057(0xfa));}function saveHistory(_0x27b365,_0x36a289,_0xc392c7){const _0x2a9ea4=a0_0x27f276;if(!_0x27b365[_0x2a9ea4(0xc9)])_0x27b365[_0x2a9ea4(0xc9)]=[];_0x27b365[_0x2a9ea4(0xc9)][_0x2a9ea4(0x108)]({'turn':_0x27b365[_0x2a9ea4(0x1e7)]||0x1,'total':_0x36a289,'formula':_0xc392c7}),updateHistoryUI();}function updateHistoryUI(){const _0x5e0aea=a0_0x27f276,_0x85c0d0=campaign['characters'][activeCharIndex],_0x38b983=document[_0x5e0aea(0x20f)](_0x5e0aea(0x11c));if(!_0x85c0d0||!_0x38b983)return;_0x38b983['innerHTML']='';const _0xef19f0=[..._0x85c0d0[_0x5e0aea(0xc9)]][_0x5e0aea(0xb4)]();if(_0xef19f0['length']===0x0){_0x38b983[_0x5e0aea(0x16a)]=_0x5e0aea(0x13e);return;}_0xef19f0[_0x5e0aea(0x1bf)](_0x5c32d4=>{const _0x3680a5=_0x5e0aea,_0x54db18=document['createElement']('li');_0x54db18[_0x3680a5(0xf1)]=_0x3680a5(0x1a5),_0x54db18[_0x3680a5(0x16a)]=_0x3680a5(0x1a4)+_0x5c32d4[_0x3680a5(0xe1)]+_0x3680a5(0x186)+_0x85c0d0[_0x3680a5(0x1c6)]+'\x22>'+_0x5c32d4[_0x3680a5(0xcc)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x38b983['appendChild'](_0x54db18);});}function toggleHistory(){const _0x4ba9ef=a0_0x27f276,_0x596eb8=document[_0x4ba9ef(0x20f)](_0x4ba9ef(0x1ea)),_0x3a23ff=document['getElementById'](_0x4ba9ef(0x183));if(!_0x596eb8||!_0x3a23ff)return;const _0x5027cf=_0x596eb8['classList'][_0x4ba9ef(0x20b)](_0x4ba9ef(0x158));_0x3a23ff[_0x4ba9ef(0x15b)]=_0x5027cf?_0x4ba9ef(0xc6):_0x4ba9ef(0xce),playSound('click');}function animate(){const _0x129a52=a0_0x27f276;requestAnimationFrame(animate);const _0x1e5f97=clock['getDelta']();if(world)world[_0x129a52(0x109)](0x1/0x3c,_0x1e5f97,0x3);diceObjects[_0x129a52(0x1bf)](_0x4a558f=>{const _0x17d255=_0x129a52;_0x4a558f[_0x17d255(0x10a)]&&_0x4a558f['body']&&(_0x4a558f[_0x17d255(0x10a)][_0x17d255(0x1fe)]['copy'](_0x4a558f[_0x17d255(0x112)][_0x17d255(0x1fe)]),_0x4a558f[_0x17d255(0x10a)][_0x17d255(0x227)][_0x17d255(0x1c8)](_0x4a558f[_0x17d255(0x112)]['quaternion']));});for(let _0x84e110=magicEffects[_0x129a52(0x199)]-0x1;_0x84e110>=0x0;_0x84e110--){const _0x38ef2c=magicEffects[_0x84e110];_0x38ef2c[_0x129a52(0x16d)]++;if(_0x38ef2c[_0x129a52(0x16d)]<0x64){_0x38ef2c[_0x129a52(0x12f)][_0x129a52(0x1fe)]['y']+=0.015;if(_0x38ef2c[_0x129a52(0x16d)]<0x14){const _0x365d00=_0x38ef2c[_0x129a52(0x16d)]/0x14;_0x38ef2c[_0x129a52(0x12f)][_0x129a52(0x13c)]['set'](_0x365d00*2.5,_0x365d00*2.5,0x1),_0x38ef2c[_0x129a52(0x12f)]['material'][_0x129a52(0x107)]=_0x365d00;}else{if(_0x38ef2c[_0x129a52(0x16d)]>0x50)_0x38ef2c[_0x129a52(0x12f)][_0x129a52(0x1ee)][_0x129a52(0x107)]=(0x64-_0x38ef2c[_0x129a52(0x16d)])/0x14;}}if(_0x38ef2c[_0x129a52(0x16d)]<0x3c&&Math[_0x129a52(0x15f)]()>0.3){const _0x1ddf21=new THREE[(_0x129a52(0x13f))]({'map':sparkleTexture,'transparent':!![],'color':_0x38ef2c[_0x129a52(0x1c6)],'opacity':0.8,'blending':THREE['AdditiveBlending']}),_0x13b54c=new THREE['Sprite'](_0x1ddf21);_0x13b54c[_0x129a52(0x1fe)][_0x129a52(0x1c8)](_0x38ef2c[_0x129a52(0x12f)]['position']),_0x13b54c[_0x129a52(0x1fe)]['x']+=(Math['random']()-0.5)*0.5,_0x13b54c['position']['y']-=0.2,_0x13b54c[_0x129a52(0x13c)][_0x129a52(0x1de)](0.3,0.3,0x1),scene[_0x129a52(0x130)](_0x13b54c),_0x38ef2c[_0x129a52(0xf0)]['push']({'mesh':_0x13b54c,'age':0x0});}for(let _0x5e91a2=_0x38ef2c[_0x129a52(0xf0)][_0x129a52(0x199)]-0x1;_0x5e91a2>=0x0;_0x5e91a2--){const _0x2b9fdb=_0x38ef2c['particles'][_0x5e91a2];_0x2b9fdb[_0x129a52(0x111)]++,_0x2b9fdb[_0x129a52(0x10a)][_0x129a52(0x1fe)]['y']-=0.005,_0x2b9fdb['mesh'][_0x129a52(0x1ee)]['opacity']-=0.03,_0x2b9fdb[_0x129a52(0x10a)]['scale'][_0x129a52(0x226)](0.95),_0x2b9fdb[_0x129a52(0x10a)][_0x129a52(0x1ee)][_0x129a52(0x107)]<=0x0&&(scene[_0x129a52(0x215)](_0x2b9fdb[_0x129a52(0x10a)]),_0x38ef2c[_0x129a52(0xf0)][_0x129a52(0xf8)](_0x5e91a2,0x1));}_0x38ef2c[_0x129a52(0x16d)]>=0x64&&_0x38ef2c['particles'][_0x129a52(0x199)]===0x0&&(scene[_0x129a52(0x215)](_0x38ef2c['mainSprite']),magicEffects[_0x129a52(0xf8)](_0x84e110,0x1));}if(renderer&&scene&&camera)renderer[_0x129a52(0x208)](scene,camera);}document['addEventListener'](a0_0x27f276(0x1d8),_0x37a8a3=>{const _0x15fc60=a0_0x27f276;if(_0x37a8a3[_0x15fc60(0x1d6)]['id']===_0x15fc60(0xe3)){playSound(_0x15fc60(0x1e0));return;}if(_0x37a8a3[_0x15fc60(0x1d6)][_0x15fc60(0x191)](_0x15fc60(0x219))||_0x37a8a3[_0x15fc60(0x1d6)][_0x15fc60(0x191)](_0x15fc60(0x163))){playSound('touch');return;}if(_0x37a8a3['target'][_0x15fc60(0x191)](_0x15fc60(0x10d)))return;if(_0x37a8a3[_0x15fc60(0x1d6)][_0x15fc60(0x191)](_0x15fc60(0x224))||_0x37a8a3[_0x15fc60(0x1d6)][_0x15fc60(0x191)]('.dice-btn')||_0x37a8a3[_0x15fc60(0x1d6)][_0x15fc60(0x191)](_0x15fc60(0x213))||_0x37a8a3[_0x15fc60(0x1d6)][_0x15fc60(0x191)](_0x15fc60(0xe5))||_0x37a8a3[_0x15fc60(0x1d6)][_0x15fc60(0x191)]('i'))playSound(_0x15fc60(0x1d8));setupModPicker();});function handleDiceCollision(_0xa6212){const _0x36b4e3=a0_0x27f276,_0x28551c=Math[_0x36b4e3(0x12e)](_0xa6212['contact'][_0x36b4e3(0x20e)]());if(_0x28551c<0.5)return;const _0x109c7d=Date[_0x36b4e3(0xda)]();if(_0x109c7d-lastCollisionTime<0x28)return;lastCollisionTime=_0x109c7d;let _0x28309e=0x0;if(_0x28551c<0x2)_0x28309e=0x0;else{if(_0x28551c<0x4)_0x28309e=0x1;else{if(_0x28551c<0x6)_0x28309e=0x2;else{if(_0x28551c<0x8)_0x28309e=0x3;else _0x28309e=0x4;}}}playSound(_0x36b4e3(0x11e),_0x28309e);}function setupModPicker(){const _0x3dd33c=a0_0x27f276,_0x5b001d=document[_0x3dd33c(0x20f)](_0x3dd33c(0xe0));if(!_0x5b001d)return;_0x5b001d['innerHTML']='';for(let _0x2ebc25=-0xa;_0x2ebc25<=0xa;_0x2ebc25++){const _0x42b861=document[_0x3dd33c(0x189)](_0x3dd33c(0x224));_0x42b861[_0x3dd33c(0xf1)]=_0x3dd33c(0x132),_0x42b861['innerText']=(_0x2ebc25>0x0?'+':'')+_0x2ebc25,_0x42b861['onclick']=()=>selectMod(_0x2ebc25),_0x5b001d[_0x3dd33c(0xbd)](_0x42b861);}}function toggleModPicker(){const _0x568630=a0_0x27f276,_0x39f69b=document[_0x568630(0x20f)]('modPickerModal'),_0x860847=_0x39f69b[_0x568630(0x1b7)][_0x568630(0x18c)]===_0x568630(0x1ce);_0x39f69b[_0x568630(0x1b7)]['display']=_0x860847?'flex':_0x568630(0x1ce),_0x860847&&(playSound(_0x568630(0x1d8)),highlightActiveMod());}function selectMod(_0x110765){const _0x319543=a0_0x27f276,_0x9af0c6=document['getElementById'](_0x319543(0xb5)),_0x266d6d=document[_0x319543(0x20f)](_0x319543(0x1cd));_0x9af0c6[_0x319543(0x23a)]=_0x110765,_0x266d6d['innerText']=(_0x110765>0x0?'+':'')+_0x110765;if(campaign['characters'][activeCharIndex])campaign[_0x319543(0x129)][activeCharIndex][_0x319543(0x136)]=_0x110765;saveData(),toggleModPicker(),playSound('touch');}function highlightActiveMod(){const _0x922d05=a0_0x27f276,_0x1fd710=parseInt(document[_0x922d05(0x20f)](_0x922d05(0xb5))[_0x922d05(0x23a)])||0x0;document[_0x922d05(0xb3)](_0x922d05(0x12b))[_0x922d05(0x1bf)](_0x3eee16=>{const _0x5499f2=_0x922d05,_0x5764f8=parseInt(_0x3eee16[_0x5499f2(0x15b)]);_0x3eee16[_0x5499f2(0xd3)][_0x5499f2(0x20b)](_0x5499f2(0x1a9),_0x5764f8===_0x1fd710);});}function setRollMode(_0x174370){const _0x584cca=a0_0x27f276;rollMode=_0x174370;if(campaign[_0x584cca(0x129)][activeCharIndex])campaign[_0x584cca(0x129)][activeCharIndex][_0x584cca(0x184)]=_0x174370;const _0x178cfa=document[_0x584cca(0x20f)](_0x584cca(0xd2));if(!_0x178cfa)return;_0x178cfa['classList'][_0x584cca(0x215)](_0x584cca(0xee),'mode-adv',_0x584cca(0x220));if(_0x174370===_0x584cca(0x116))_0x178cfa[_0x584cca(0x15b)]=_0x584cca(0xf2),_0x178cfa[_0x584cca(0xd3)][_0x584cca(0x130)]('mode-norm');else{if(_0x174370==='advantage')_0x178cfa[_0x584cca(0x15b)]=_0x584cca(0x22c),_0x178cfa[_0x584cca(0xd3)][_0x584cca(0x130)](_0x584cca(0x153));else _0x174370==='disadvantage'&&(_0x178cfa['innerText']='DESVANTAGEM',_0x178cfa[_0x584cca(0xd3)]['add'](_0x584cca(0x220)));}}function cycleRollMode(){const _0x26bea1=a0_0x27f276;playSound(_0x26bea1(0x1d8));if(rollMode===_0x26bea1(0x116))setRollMode(_0x26bea1(0x19a));else{if(rollMode==='advantage')setRollMode(_0x26bea1(0xed));else setRollMode(_0x26bea1(0x116));}}function openGlobalLog(){const _0x5c722c=a0_0x27f276,_0x3da46a=document[_0x5c722c(0x20f)](_0x5c722c(0x1bc)),_0x42a6a9=document[_0x5c722c(0x20f)]('globalLogList');if(!campaign['globalLog'])campaign[_0x5c722c(0xdb)]=[];let _0xdea959={};campaign[_0x5c722c(0xdb)][_0x5c722c(0x1bf)](_0x3cde60=>{const _0x28b826=_0x5c722c;if(_0x3cde60[_0x28b826(0xfb)]!==null&&_0x3cde60[_0x28b826(0xfb)]!==undefined){if(!_0xdea959[_0x3cde60[_0x28b826(0x19c)]])_0xdea959[_0x3cde60[_0x28b826(0x19c)]]={'sum':0x0,'count':0x0};_0xdea959[_0x3cde60[_0x28b826(0x19c)]][_0x28b826(0x12d)]+=_0x3cde60[_0x28b826(0xfb)],_0xdea959[_0x3cde60['charName']][_0x28b826(0x23e)]++;}});let _0x7b21fa=-0x1,_0x2087ca=0x15,_0x42b374='--',_0x11ba63='--';for(const [_0x21ce46,_0x2207db]of Object[_0x5c722c(0x1e1)](_0xdea959)){if(_0x2207db[_0x5c722c(0x23e)]>0x0){const _0x4909ec=_0x2207db[_0x5c722c(0x12d)]/_0x2207db['count'];_0x4909ec>_0x7b21fa&&(_0x7b21fa=_0x4909ec,_0x42b374=_0x21ce46),_0x4909ec<_0x2087ca&&(_0x2087ca=_0x4909ec,_0x11ba63=_0x21ce46);}}document['getElementById']('statLuckyName')['innerText']=_0x42b374,document['getElementById'](_0x5c722c(0xde))['innerText']=_0x7b21fa>-0x1?'Média:\x20'+_0x7b21fa[_0x5c722c(0x198)](0x1):_0x5c722c(0x14f),document[_0x5c722c(0x20f)](_0x5c722c(0x16c))[_0x5c722c(0x15b)]=_0x11ba63,document[_0x5c722c(0x20f)](_0x5c722c(0x1af))['innerText']=_0x2087ca<0x15?'Média:\x20'+_0x2087ca['toFixed'](0x1):_0x5c722c(0x14f),_0x42a6a9['innerHTML']='',[...campaign[_0x5c722c(0xdb)]]['reverse']()[_0x5c722c(0x1bf)](_0x47dd95=>{const _0x1afa00=_0x5c722c,_0x260ebf=document[_0x1afa00(0x189)]('li');_0x260ebf[_0x1afa00(0xf1)]='global-log-entry';let _0x199a6e='log-total';if(_0x47dd95[_0x1afa00(0xfb)]===0x14)_0x199a6e+=_0x1afa00(0x21a);if(_0x47dd95[_0x1afa00(0xfb)]===0x1)_0x199a6e+='\x20log-crit-fail';_0x260ebf[_0x1afa00(0x16a)]=_0x1afa00(0x162)+_0x47dd95['charColor']+'\x22>'+_0x47dd95['charName']+_0x1afa00(0xc2)+_0x47dd95[_0x1afa00(0x1ba)]+'</span></div><div\x20class=\x22log-result-box\x22><span\x20class=\x22'+_0x199a6e+'\x22>'+_0x47dd95[_0x1afa00(0xcc)]+_0x1afa00(0xe6)+_0x47dd95['formula']+_0x1afa00(0x1bb),_0x42a6a9[_0x1afa00(0xbd)](_0x260ebf);}),_0x3da46a[_0x5c722c(0x1b7)][_0x5c722c(0x18c)]='flex',playSound('click');}function openCompendium(){const _0x2b73=a0_0x27f276,_0x1f9731=document[_0x2b73(0x20f)]('compendiumModal');if(_0x1f9731){_0x1f9731['style'][_0x2b73(0x18c)]=_0x2b73(0xc3);if(typeof rulesData!==_0x2b73(0x21d))renderRules(rulesData);playSound(_0x2b73(0x1d8));}}function getLevelValue(_0x37744c){const _0x41906b=a0_0x27f276;if(_0x37744c[_0x41906b(0x1c3)]!==_0x41906b(0x106))return-0x1;if(_0x37744c[_0x41906b(0x123)][_0x41906b(0x23f)](_0x41906b(0xca)))return 0x0;const _0x45888c=_0x37744c['meta'][_0x41906b(0x1f2)](/(\d+)º/);return _0x45888c?parseInt(_0x45888c[0x1]):0x0;}function getSortPriority(_0x43eaac){const _0x135199=a0_0x27f276;if(_0x43eaac[_0x135199(0x119)][_0x135199(0x23f)]('Visão\x20Geral'))return 0x1;if(_0x43eaac[_0x135199(0x119)][_0x135199(0x23f)]('Traços\x20Principais'))return 0x2;const _0x21912c=_0x43eaac['meta']?_0x43eaac['meta'][_0x135199(0x1f2)](/Nível (\d+)/):null;if(_0x21912c)return 0xa+parseInt(_0x21912c[0x1]);if(_0x43eaac['meta']&&_0x43eaac['meta']['includes'](_0x135199(0x195)))return 0x64;return 0x32;}function a0_0x273c(){const _0x299c52=['quaternion','div','setupModal','_blank','class','VANTAGEM','Erro\x20som:\x20','Raça','canvasContainer','Erro\x20ao\x20salvar','text/plain','Regra','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','setSize','Magia','Rolando...','tan','rgba(0,0,0,0.8)','Truques\x20(Nível\x200)','value','INICIAR\x20JORNADA','center','crit-success-flash','count','includes','querySelectorAll','reverse','modInput','font','count-d','avatar','<img\x20src=\x22gnomef.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Gnoma\x22>','lookAt','</div><span\x20style=\x22color:','./shoot.mp3','appendChild','splash-hidden','norm','textAlign','playbackRate','</span><span\x20class=\x22log-time\x22>','flex','<img\x20src=\x22elfhighm.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22High\x20Elfo\x22>','NaiveBroadphase','Ocultar\x20Histórico','Erro\x20ao\x20adicionar\x20personagem.\x20Tente\x20\x27Reiniciar\x20Jornada\x27\x20nas\x20configurações.','castShadow','history','Truque','fov','total','<img\x20src=\x22dragonbornf.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Dracona\x22>','Ver\x20Histórico','#ffffff','name','<img\x20src=\x22dragonbornm.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Dracono\x22>','cycleVantBtn','classList','<img\x20src=\x22tieflingm.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Tiefling\x20M\x22>','TetrahedronGeometry','function','width','angularVelocity','Vec3','now','globalLog','\x20(Mod)','solver','statLuckyVal','val','modGrid','formula','7pVzffL','startCampaignBtn','lvl-','select','</span><span\x20class=\x22log-formula\x22>','<img\x20src=\x22bhumanf.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Humana\x22>','parse','shadowColor','addBody','contains','createGain','disadvantage','mode-norm','fill','particles','className','NORMAL','diceSelector','<img\x20src=\x22humanf.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Humana\x22>','removeBody','querySelector','Scene','splice',',0.6)','touch','rawD20','mousedown','ruleSearch','stopped','DirectionalLight','svg','enabled','disabled','<img\x20src=\x22humanm.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Humano\x22>','220JfRsEt','localeCompare','spell','opacity','push','step','mesh','Condição','Clock','#rollBtn','<img\x20src=\x22familiar.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Familiar\x22>','clientWidth','equipment','age','body','rollen_save_v1','\x22>0</span>','type','normal','\x20<span\x20class=\x22dice-count\x22\x20id=\x22count-d','./touch.mp3','title','feat','charTabsContainer','historyList','ctrlKey','collides','5577DxDLYi','Sphere','updateProjectionMatrix','ondragend','meta','<img\x20src=\x22gnomem.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Gnomo\x22>','height','setItem','Item','PCFSoftShadowMap','characters','selected','.mod-btn','find','sum','abs','mainSprite','add','charNameInput','mod-btn','header-','setData','stop','modifier','gravity','degToRad','state','Erro\x203D:','shadowBlur','scale','charCodeAt','<li\x20style=\x27text-align:center;\x20opacity:0.5;\x20padding:20px;\x27>Nenhuma\x20rolagem\x20ainda...</li>','SpriteMaterial','draggable','24tCuEwo','<img\x20src=\x22halfelff.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Meia\x20Elfa\x22>','slice','rgba(255,255,255,0)','decodeAudioData','stringify','setFromAxisAngle','fillRect','Save\x20corrompido,\x20resetando.','Erro\x20loadData','Box','onclick','<img\x20src=\x22halforcm.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Orc\x20M\x22>','map','Média:\x20-','campaign','1633542cNLyra','join','mode-adv','middle','sort','fillStyle','broadphase','open','contextmenu','NFD','innerText','touchstart','ContactMaterial','<img\x20src=\x22elfdrowf.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Drow\x20F\x22>','random','<div\x20style=\x27text-align:center;\x20color:#5d4037;\x20margin-top:20px;\x27>Nenhum\x20conhecimento\x20encontrado...</div>','bold\x20110px\x20Arial','<div\x20class=\x22log-meta\x22><span\x20class=\x22log-char-name\x22\x20style=\x22color:\x20','.avatar-option','left','ondragover','avatar-option\x20','wakeUp','text','combat','innerHTML','./collide2.mp3','statUnluckyName','life','OctahedronGeometry','load','isArray','shoot','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22\x20style=\x22background:','avatarGrid','ondrop','.cat-btn','rollBtn','<img\x20src=\x22tieflingf.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Tiefling\x20F\x22>','textBaseline','rgba(255,255,255,1)','<img\x20src=\x22halfelfm.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Meio\x20Elfo\x22>','Rollen:\x20O\x20carregamento\x20demorou\x20demais.\x20Forçando\x20entrada.','Mesh','fumble','addEventListener','<img\x20src=\x22master.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Mestre\x22>','<img\x20src=\x22boss.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Chefe\x22>','dice-btn','toggleHistoryBtn','rollMode','./fumble.mp3','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22roll-equals\x22>=</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22roll-total\x22\x20style=\x22color:','replace','floor','createElement','success','Body','display','domElement','shadowMap','mouseup','CanvasTexture','closest','Histórico\x20limpo!','\x20+\x20','suspended','Subclasse','charged','VOLTAR\x20AO\x20JOGO','toFixed','length','advantage','./collide5.mp3','charName','filter','char-tab\x20','campaignNameInput','powerBar','Erro\x20ao\x20adicionar:','parentClass','DOMContentLoaded','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22roll-formula\x22>','roll-entry','clientHeight','toLowerCase','keys','active','borderColor','shapes','Aventura','bottom','splash-screen','statUnluckyVal','fail','keyCode','level-header\x20','AmbientLight','activeCharIndex','<img\x20src=\x22goliathf.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Goliath\x20F\x22>','<div\x20style=\x22font-size:0.75rem;\x20color:#d84315;\x20font-style:italic;\x20margin-bottom:8px;\x20border-bottom:1px\x20dashed\x20rgba(0,0,0,0.1);\x20padding-bottom:4px;\x22>','style','<img\x20src=\x22aesimarf.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Aesimar\x20M\x22>','addContactMaterial','timestamp','</span></div>','globalLogModal','588978OtufxN','crit','forEach','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rule-tag\x20','trim','devicePixelRatio','category','424028prBcmB','right','color','addColorStop','copy','clear','<img\x20src=\x22elfdrowm.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Drow\x20M\x22>','species','5395670FLnBAT','modDisplay','none','PerspectiveCamera','tag-','iterations','addCharBtn','velocity','<img\x20src=\x22goliathm.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Goliath\x20M\x22>','PointLight','target','min','click','WebGLRenderer','master','normalize','</div>\x20','rule-card','set','btn-d','start','entries','./click.mp3','ATENÇÃO:\x20Isso\x20apagará\x20permanentemente\x20todos\x20os\x20seus\x20heróis\x20e\x20a\x20campanha\x20atual.\x20Deseja\x20continuar?','MeshPhysicalMaterial','touchend','resume','turnCount','ondragstart','hold','historyPanel','settingsMenu','warn','currentAvatarDisplay','material','toString','Zerar\x20histórico?','nat1-effect','match','appContainer','connect','createBufferSource','shake-effect','preventDefault','1009500VIKdEJ',';\x20font-weight:bold;\x22>','Material','rulesList','top','</span>','position','\x20(D','obj','<img\x20src=\x22elfwoodm.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22Elfo\x20da\x20Floresta\x20M\x22>','getItem','resultTotal','108067GCXeQl','rgba(','loop','createRadialGradient','render','gain','getContext','toggle','resultFormula','Ação','getImpactVelocityAlongNormal','getElementById','renderOrder','ignored','AudioContext','input','./collide1.mp3','remove','crit-fail-flash','canvas','all','.char-tab','\x20log-crit-success','<img\x20src=\x22elfhighf.png\x22\x20class=\x22avatar-img\x22\x20alt=\x22High\x20Elfa\x22>','IcosahedronGeometry','undefined','roll','action','mode-dis','buffer','<div\x20class=\x22tab-avatar\x22>','error','button','dataTransfer','multiplyScalar'];a0_0x273c=function(){return _0x299c52;};return a0_0x273c();}function renderRules(_0x3cd9e1){const _0x46ed7a=a0_0x27f276,_0x210e34=document['getElementById'](_0x46ed7a(0x1fb));if(!_0x210e34)return;_0x210e34['innerHTML']='';if(_0x3cd9e1[_0x46ed7a(0x199)]===0x0){_0x210e34[_0x46ed7a(0x16a)]=_0x46ed7a(0x160);return;}const _0x1c3aef=[..._0x3cd9e1]['sort']((_0x2c5a73,_0x6d8b3f)=>{const _0x521026=_0x46ed7a,_0x654276={'condition':0x1,'action':0x1,'combat':0x1,'env':0x1,'class':0x2,'species':0x2,'feat':0x3,'spell':0x4,'equipment':0x5};if(_0x654276[_0x2c5a73[_0x521026(0x1c3)]]!==_0x654276[_0x6d8b3f[_0x521026(0x1c3)]])return(_0x654276[_0x2c5a73['category']]||0x63)-(_0x654276[_0x6d8b3f['category']]||0x63);if([_0x521026(0x22b),'species',_0x521026(0x110),_0x521026(0x11a)][_0x521026(0x23f)](_0x2c5a73[_0x521026(0x1c3)])){if(_0x2c5a73[_0x521026(0x1a2)]!==_0x6d8b3f[_0x521026(0x1a2)])return _0x2c5a73[_0x521026(0x1a2)][_0x521026(0x105)](_0x6d8b3f[_0x521026(0x1a2)]);const _0x140cf7=typeof getSortPriority===_0x521026(0xd6)?getSortPriority(_0x2c5a73):0x32,_0x3e2e94=typeof getSortPriority==='function'?getSortPriority(_0x6d8b3f):0x32;if(_0x140cf7!==_0x3e2e94)return _0x140cf7-_0x3e2e94;return _0x2c5a73['title'][_0x521026(0x105)](_0x6d8b3f['title']);}const _0x3f280a=typeof getLevelValue===_0x521026(0xd6)?getLevelValue(_0x2c5a73):0x0,_0x156942=typeof getLevelValue===_0x521026(0xd6)?getLevelValue(_0x6d8b3f):0x0;if(_0x3f280a!==_0x156942)return _0x3f280a-_0x156942;return _0x2c5a73[_0x521026(0x119)][_0x521026(0x105)](_0x6d8b3f[_0x521026(0x119)]);});let _0x1fb43a='';_0x1c3aef[_0x46ed7a(0x1bf)](_0x3509e2=>{const _0x28e1c5=_0x46ed7a;let _0x1a517f='',_0x19f5b6='';if(_0x3509e2['category']===_0x28e1c5(0x106)){const _0xfb23c6=getLevelValue(_0x3509e2);_0x1a517f=_0xfb23c6===0x0?_0x28e1c5(0x239):'Círculo\x20'+_0xfb23c6+'º',_0x19f5b6=_0x28e1c5(0xe4)+_0xfb23c6;}else{if([_0x28e1c5(0x22b),_0x28e1c5(0x1cb),_0x28e1c5(0x110),'feat'][_0x28e1c5(0x23f)](_0x3509e2[_0x28e1c5(0x1c3)])){_0x1a517f=_0x3509e2[_0x28e1c5(0x1a2)];const _0x1e74bd=_0x1a517f[_0x28e1c5(0x1a7)]()[_0x28e1c5(0x1db)](_0x28e1c5(0x15a))[_0x28e1c5(0x187)](/[\u0300-\u036f]/g,'')['replace'](/\s+/g,'');_0x19f5b6=_0x28e1c5(0x133)+_0x1e74bd;}else _0x1a517f=null;}if(_0x1a517f&&_0x1fb43a!==_0x1a517f){_0x1fb43a=_0x1a517f;const _0x450834=document[_0x28e1c5(0x189)](_0x28e1c5(0x228));_0x450834[_0x28e1c5(0xf1)]=_0x28e1c5(0x1b2)+_0x19f5b6,_0x450834['innerText']=_0x1a517f,_0x210e34[_0x28e1c5(0xbd)](_0x450834);}const _0x29a0a0=document[_0x28e1c5(0x189)]('div');_0x29a0a0[_0x28e1c5(0xf1)]=_0x28e1c5(0x1dd);let _0x2ed5bd=translateCategory(_0x3509e2[_0x28e1c5(0x1c3)]),_0xc04571='';if([_0x28e1c5(0x22b),_0x28e1c5(0x1cb),_0x28e1c5(0x110),'feat'][_0x28e1c5(0x23f)](_0x3509e2['category'])){_0x2ed5bd=_0x3509e2[_0x28e1c5(0x1a2)];const _0x410ce4=_0x2ed5bd[_0x28e1c5(0x1a7)]()[_0x28e1c5(0x1db)](_0x28e1c5(0x15a))[_0x28e1c5(0x187)](/[\u0300-\u036f]/g,'')['replace'](/\s+/g,'');_0xc04571=_0x28e1c5(0x1d0)+_0x410ce4;}else _0xc04571=_0x28e1c5(0x1d0)+_0x3509e2[_0x28e1c5(0x1c3)];let _0x1457d5=_0x3509e2['meta']?_0x28e1c5(0x1b6)+_0x3509e2[_0x28e1c5(0x123)]+'</div>':'';_0x29a0a0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22rule-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3509e2[_0x28e1c5(0x119)]+_0x28e1c5(0x1c0)+_0xc04571+_0x28e1c5(0x173)+(_0x3509e2[_0x28e1c5(0x1c3)]===_0x28e1c5(0x106)?'#7b1fa2':'')+'\x22>'+_0x2ed5bd+_0x28e1c5(0x172)+_0x1457d5+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22rule-desc\x22>'+_0x3509e2[_0x28e1c5(0x168)]+_0x28e1c5(0x233),_0x210e34[_0x28e1c5(0xbd)](_0x29a0a0);});}function translateCategory(_0x865f5e){const _0x56758a=a0_0x27f276;if(_0x865f5e==='condition')return _0x56758a(0x10b);if(_0x865f5e===_0x56758a(0x21f))return _0x56758a(0x20d);if(_0x865f5e===_0x56758a(0x169))return _0x56758a(0x232);if(_0x865f5e==='spell')return _0x56758a(0x235);if(_0x865f5e==='env')return'Ambiente';if(_0x865f5e==='species')return _0x56758a(0x22e);if(_0x865f5e===_0x56758a(0x110))return _0x56758a(0x127);if(_0x865f5e===_0x56758a(0x11a))return'Talento';return _0x865f5e;}function filterRules(){const _0x2d71d7=a0_0x27f276,_0x1e1f57=document['getElementById']('ruleSearch');if(!_0x1e1f57||typeof rulesData==='undefined')return;const _0x5b6d9d=normalizeText(_0x1e1f57[_0x2d71d7(0x23a)][_0x2d71d7(0x1c1)]());let _0x148dd3=_0x5b6d9d;_0x5b6d9d[_0x2d71d7(0x199)]>0x3&&(_0x148dd3=_0x5b6d9d[_0x2d71d7(0x187)](/(r|s)$/,''));const _0x5e8cc2=rulesData[_0x2d71d7(0x19d)](_0x307085=>{const _0xff046d=_0x2d71d7,_0xd4833c=normalizeText(_0x307085[_0xff046d(0x119)]),_0x4cd7e5=normalizeText(_0x307085[_0xff046d(0x168)]),_0x3f8d93=normalizeText(_0x307085[_0xff046d(0x123)]||''),_0x9103b8=_0xd4833c[_0xff046d(0x23f)](_0x5b6d9d)||_0xd4833c[_0xff046d(0x23f)](_0x148dd3),_0x128578=_0x4cd7e5[_0xff046d(0x23f)](_0x5b6d9d)||_0x4cd7e5[_0xff046d(0x23f)](_0x148dd3),_0x8ad198=_0x3f8d93['includes'](_0x5b6d9d)||_0x3f8d93[_0xff046d(0x23f)](_0x148dd3);return _0x9103b8||_0x128578||_0x8ad198;});renderRules(_0x5e8cc2),document[_0x2d71d7(0xb3)](_0x2d71d7(0x176))[_0x2d71d7(0x1bf)](_0x58f331=>_0x58f331['classList'][_0x2d71d7(0x215)]('active'));}function normalizeText(_0x3161a6){const _0x3a48bc=a0_0x27f276;if(!_0x3161a6)return'';return _0x3161a6['normalize'](_0x3a48bc(0x15a))[_0x3a48bc(0x187)](/[\u0300-\u036f]/g,'')[_0x3a48bc(0x1a7)]();}function filterCategory(_0x420bb5){const _0x33d9f4=a0_0x27f276;document['querySelectorAll'](_0x33d9f4(0x176))[_0x33d9f4(0x1bf)](_0x180628=>_0x180628['classList']['remove'](_0x33d9f4(0x1a9)));if(event&&event['target'])event[_0x33d9f4(0x1d6)][_0x33d9f4(0xd3)][_0x33d9f4(0x130)](_0x33d9f4(0x1a9));const _0x5a88fa=document[_0x33d9f4(0x20f)](_0x33d9f4(0xfd));if(_0x5a88fa)_0x5a88fa['value']='';if(typeof rulesData===_0x33d9f4(0x21d))return;if(_0x420bb5===_0x33d9f4(0x218))renderRules(rulesData);else{const _0x1da32f=rulesData['filter'](_0x343824=>_0x343824[_0x33d9f4(0x1c3)]===_0x420bb5);renderRules(_0x1da32f);}}function setupEventListeners(){const _0x11aaf9=a0_0x27f276,_0x5c64fb=document['getElementById'](_0x11aaf9(0x1d2));if(_0x5c64fb)_0x5c64fb[_0x11aaf9(0x14c)]=addCharacterPreview;const _0xb74083=document['getElementById'](_0x11aaf9(0xe3));if(_0xb74083)_0xb74083['onclick']=startCampaign;const _0x35f5cb=document['getElementById'](_0x11aaf9(0x177));_0x35f5cb&&(_0x35f5cb[_0x11aaf9(0x17f)](_0x11aaf9(0xfc),startCharging),window[_0x11aaf9(0x17f)](_0x11aaf9(0x18f),releaseRoll),_0x35f5cb['addEventListener'](_0x11aaf9(0x15c),_0x1a5bd8=>{const _0x2ccbe4=_0x11aaf9;_0x1a5bd8[_0x2ccbe4(0x1f7)](),startCharging();}),window['addEventListener'](_0x11aaf9(0x1e5),releaseRoll));const _0x5d1744=document[_0x11aaf9(0x20f)]('clearBtn');if(_0x5d1744)_0x5d1744[_0x11aaf9(0x14c)]=clearDice;const _0xeedf2e=document[_0x11aaf9(0x20f)](_0x11aaf9(0x183));if(_0xeedf2e)_0xeedf2e[_0x11aaf9(0x14c)]=toggleHistory;window[_0x11aaf9(0x17f)]('resize',refreshCanvasSize);}document['addEventListener'](a0_0x27f276(0x1a3),()=>{setupEventListeners();});function openDonation(){const _0x10e012=a0_0x27f276,_0x1a1804='https://apoia.se/rollenapp';playSound('click'),window[_0x10e012(0x158)](_0x1a1804,_0x10e012(0x22a));}document[a0_0x27f276(0x17f)](a0_0x27f276(0x159),_0x483d1f=>_0x483d1f[a0_0x27f276(0x1f7)]()),document['onkeydown']=function(_0x3d74e2){const _0x4d743d=a0_0x27f276;if(_0x3d74e2[_0x4d743d(0x1b1)]==0x7b)return![];if(_0x3d74e2[_0x4d743d(0x11d)]&&_0x3d74e2['shiftKey']&&(_0x3d74e2[_0x4d743d(0x1b1)]=='I'['charCodeAt'](0x0)||_0x3d74e2[_0x4d743d(0x1b1)]=='C'[_0x4d743d(0x13d)](0x0)||_0x3d74e2[_0x4d743d(0x1b1)]=='J'[_0x4d743d(0x13d)](0x0)))return![];if(_0x3d74e2[_0x4d743d(0x11d)]&&_0x3d74e2[_0x4d743d(0x1b1)]=='U'['charCodeAt'](0x0))return![];};function hideSplashScreen(){const _0x2163b4=a0_0x27f276,_0x2af075=document[_0x2163b4(0x20f)]('splash-screen');_0x2af075&&(console['log']('Rollen:\x20Finalizando\x20carregamento...'),_0x2af075[_0x2163b4(0xd3)][_0x2163b4(0x130)](_0x2163b4(0xbe)),setTimeout(()=>{const _0x19311a=_0x2163b4;_0x2af075[_0x19311a(0x1b7)][_0x19311a(0x18c)]='none';},0x320));}window[a0_0x27f276(0x17f)](a0_0x27f276(0x16f),hideSplashScreen),setTimeout(()=>{const _0x27cc1d=a0_0x27f276,_0x16709a=document[_0x27cc1d(0x20f)](_0x27cc1d(0x1ae));_0x16709a&&!_0x16709a[_0x27cc1d(0xd3)][_0x27cc1d(0xeb)](_0x27cc1d(0xbe))&&(console['warn'](_0x27cc1d(0x17c)),hideSplashScreen());},0x1388);